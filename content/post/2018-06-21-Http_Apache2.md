---
title: Http(Apache2)
date: 2018-06-21 16:03:32
urlname: httpd2
tags: Linux
categories: Http
---

æ‘˜è¦ï¼šå‹åŠ›æµ‹è¯•å·¥å…·abï¼Œè®¿é—®å·¥å…·curlï¼ŒhttpçŠ¶æ€ç ï¼Œhttpsçš„å®ç°è¿‡ç¨‹

# å‹åŠ›æµ‹è¯•å·¥å…·`ab`

â€‹	httpdçš„å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œè¿™é‡Œä¸»è¦ä»‹ç»`ab`

`ab [OPTIONS] URL`ï¼Œæ¥è‡ª`httpd-tools`åŒ…

`optionsï¼š`

> -nï¼šæ€»è¯·æ±‚æ•°
> -cï¼šæ¨¡æ‹Ÿçš„å¹¶è¡Œæ•°
> -kï¼šä»¥æŒä¹…è¿æ¥æ¨¡å¼æµ‹è¯•
> ulimit â€“n # è°ƒæ•´èƒ½æ‰“å¼€çš„æ–‡ä»¶æ•°

```
]# ab -c 100 -n 2000 http://192.168.1.8/huge.txt
Server Software:        Apache
Server Hostname:        172.20.114.173
Server Port:            80
Document Path:          /index.html
Document Length:        27 bytes
Concurrency Level:      100
Time taken for tests:   0.582 seconds
Complete requests:      1000
Failed requests:        0
Write errors:           0
Total transferred:      272000 bytes
HTML transferred:       27000 bytes
Requests per second:    1718.83 [#/sec] (mean)
Time per request:       58.179 [ms] (mean)
Time per request:       0.582 [ms] (mean, across all concurrent requests)
Transfer rate:          456.57 [Kbytes/sec] received
Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    6  27.6      3     361
Processing:     5   50 105.8     17     387
Waiting:        1   49 105.4     17     387
Total:         12   56 108.6     22     393
Percentage of the requests served within a certain time (ms)
  50%     22
  66%     23
  75%     24
  80%     24
  90%     29
  95%    384
  98%    389
  99%    390
 100%    393 (longest request)
```
abå‘½ä»¤åœ¨ä¸€èˆ¬ç³»ç»Ÿä¸Šé¢åšæµ‹è¯•æ—¶å€™ï¼Œä¸€èˆ¬å¹¶å‘ä¸èƒ½è¶…è¿‡1024ä¸ªï¼Œå…¶å®æ˜¯å› ä¸ºå› ä¸ºç³»ç»Ÿé™åˆ¶æ¯ä¸ªè¿›ç¨‹æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æ•°ä¸º1024ï¼Œå¯ä»¥ç”¨ulimit -aæ¥æŸ¥çœ‹	

# curl

â€‹	curlæ˜¯åŸºäºURLè¯­æ³•åœ¨å‘½ä»¤è¡Œæ–¹å¼ä¸‹å·¥ä½œçš„æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼Œå®ƒæ”¯æŒFTP, FTPS,HTTP, HTTPS, GOPHER, TELNET, DICT, FILEåŠLDAPç­‰åè®®ã€‚curlæ”¯æŒHTTPSè®¤è¯ï¼Œå¹¶ä¸”æ”¯æŒHTTPçš„POSTã€PUTç­‰æ–¹æ³•ï¼Œ FTPä¸Šä¼ ï¼Œ `kerberos`è®¤è¯ï¼ŒHTTPä¸Šä¼ ï¼Œä»£ç†æœåŠ¡å™¨ï¼Œcookiesï¼Œç”¨æˆ·å/å¯†ç è®¤è¯ï¼Œ ä¸‹è½½æ–‡ä»¶æ–­ç‚¹ç»­ä¼ ï¼Œä¸Šè½½æ–‡ä»¶æ–­ç‚¹ç»­ä¼ , httpä»£ç†æœåŠ¡å™¨ç®¡é“ï¼ˆ `proxy tunneling`ï¼‰ï¼Œè¿˜æ”¯æŒIPv6ï¼Œsocks5ä»£ç†æœåŠ¡å™¨ï¼Œé€šè¿‡httpä»£ç†æœåŠ¡å™¨ä¸Šä¼ æ–‡ä»¶åˆ°FTPæœåŠ¡å™¨ç­‰ï¼ŒåŠŸèƒ½ååˆ†å¼ºå¤§.

```shell
]# curl -I 192.168.1.8
]# curl -v 192.168.1.8
]# curl -A "ie20" 192.168.1.8
]# curl -e "www.baidu.com" 192.168.1.8
]# curl http://192.168.1.8/f1.sh -O
]# curl http://192.168.1.8/f1.sh -o f11.sh
]# curl http://192.168.1.8/f1.sh |bash
]# curl -c cookie.txt 192.168.1.8/setcookie.php 
]# cat cookie.txt 
# Netscape HTTP Cookie File
# http://curl.haxx.se/docs/http-cookies.html
# This file was generated by libcurl! Edit at your own risk.
192.168.1.8	FALSE	/	FALSE	0	title	ceo
192.168.1.8	FALSE	/	FALSE	1529553543	name	wang
```
# HTTPåè®®ç›¸å…³

â€‹	httpè¯·æ±‚æŠ¥æ–‡çš„æ¨¡æ‹ŸçŠ¶æ€

```
]#telnet 192.168.1.8 80
Trying 192.168.1.8...
Connected to 192.168.1.8.
Escape character is '^]'.
GET /index.html HTTP/1.1
host: 2.2.2.2      //éœ€è¦enterä¸¤ä¸‹ï¼Œæäº¤æŠ¥æ–‡

HTTP/1.1 200 OK
Date: Thu, 21 Jun 2018 06:37:23 GMT
Server: Apache
Last-Modified: Thu, 21 Jun 2018 06:28:49 GMT
ETag: "11-56f210742b912"
Accept-Ranges: bytes
Content-Length: 17
Content-Type: text/html; charset=UTF-8

welcome to hong~
```





![1529463184589](http://pic.fenghong.tech/1529463184589.png)

â€‹	httpå“åº”æŠ¥æ–‡çŠ¶æ€çš„è·å–æŸ¥çœ‹ï¼Œåˆ©ç”¨`curl -I URL`

```
]#curl -I 192.168.1.8
HTTP/1.1 200 OK
Date: Thu, 21 Jun 2018 06:19:20 GMT
Server: Apache
Last-Modified: Wed, 20 Jun 2018 15:29:42 GMT
ETag: "e-56f1477b8b86d"
Accept-Ranges: bytes
Content-Length: 14
Content-Type: text/html; charset=UTF-8
```



![1529560348043](http://pic.fenghong.tech/1529560348043.png)

åè®®æŸ¥çœ‹æˆ–åˆ†æçš„å·¥å…·ï¼š`tcpdump`, `wireshark`,`tshark`

## httpçŠ¶æ€ç 

â€‹	å¸¸è§ä»£ç å¦‚ä¸‹ï¼š

```
1xxï¼š100-101  ä¿¡æ¯æç¤º
2xxï¼š200-206  æˆåŠŸ
3xxï¼š300-305  é‡å®šå‘
4xxï¼š400-415  é”™è¯¯ç±»ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯é”™è¯¯
5xxï¼š500-505  é”™è¯¯ç±»ä¿¡æ¯ï¼ŒæœåŠ¡å™¨ç«¯é”™è¯¯
```
â€‹	è¯¦ç»†çŠ¶æ€ç å¦‚ä¸‹ï¼š
```
200ï¼š æˆåŠŸï¼Œè¯·æ±‚æ•°æ®é€šè¿‡å“åº”æŠ¥æ–‡çš„entity-bodyéƒ¨åˆ†å‘é€;OK
301ï¼š è¯·æ±‚çš„URLæŒ‡å‘çš„èµ„æºå·²ç»è¢«åˆ é™¤ï¼›ä½†åœ¨å“åº”æŠ¥æ–‡ä¸­é€šè¿‡é¦–éƒ¨LocationæŒ‡æ˜äº†èµ„æºç°åœ¨æ‰€å¤„çš„æ–°ä½ç½®ï¼›Moved Permanently
302ï¼š å“åº”æŠ¥æ–‡LocationæŒ‡æ˜èµ„æºä¸´æ—¶æ–°ä½ç½® Moved Temporarily
304ï¼š å®¢æˆ·ç«¯å‘å‡ºäº†æ¡ä»¶å¼è¯·æ±‚ï¼Œä½†æœåŠ¡å™¨ä¸Šçš„èµ„æºæœªæ›¾å‘ç”Ÿæ”¹å˜ï¼Œåˆ™é€šè¿‡å“åº”æ­¤å“åº”çŠ¶æ€ç é€šçŸ¥å®¢æˆ·ç«¯ï¼›Not Modified
401ï¼š éœ€è¦è¾“å…¥è´¦å·å’Œå¯†ç è®¤è¯æ–¹èƒ½è®¿é—®èµ„æºï¼›Unauthorized
403ï¼š è¯·æ±‚è¢«ç¦æ­¢ï¼›Forbidden
404ï¼š æœåŠ¡å™¨æ— æ³•æ‰¾åˆ°å®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æºï¼›Not Found
500ï¼š æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼›Internal Server Error
502ï¼š ä»£ç†æœåŠ¡å™¨ä»åç«¯æœåŠ¡å™¨æ”¶åˆ°äº†ä¸€æ¡ä¼ªå“åº”ï¼Œå¦‚æ— æ³•è¿æ¥åˆ°ç½‘å…³ï¼›BadGateway
503:   æœåŠ¡ä¸å¯ç”¨ï¼Œä¸´æ—¶æœåŠ¡å™¨ç»´æŠ¤æˆ–è¿‡è½½ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚
504:   ç½‘å…³è¶…æ—¶
```

# Cookie

â€‹	HTTP æ˜¯ä¸€ç§æ— çŠ¶æ€åè®®ã€‚åè®®è‡ªèº«ä¸å¯¹è¯·æ±‚å’Œå“åº”ä¹‹é—´çš„é€šä¿¡çŠ¶æ€è¿›è¡Œä¿å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ HTTP è¿™ä¸ªçº§åˆ«ï¼Œåè®®å¯¹äºå‘é€è¿‡çš„è¯·æ±‚æˆ–å“åº”éƒ½ä¸åšæŒä¹…åŒ–å¤„ç†ã€‚è¿™æ˜¯ä¸ºäº†æ›´å¿«åœ°å¤„ç†å¤§é‡äº‹åŠ¡ï¼Œç¡®ä¿åè®®çš„å¯ä¼¸ç¼©æ€§ï¼Œè€Œç‰¹æ„æŠŠ HTTP åè®®è®¾è®¡æˆå¦‚æ­¤ç®€å•çš„ã€‚å¯æ˜¯éšç€ Web çš„ä¸æ–­å‘å±•ï¼Œå¾ˆå¤šä¸šåŠ¡éƒ½éœ€è¦å¯¹é€šä¿¡çŠ¶æ€è¿›è¡Œä¿å­˜ã€‚äºæ˜¯å¼•å…¥äº† Cookie æŠ€æœ¯ã€‚ä½¿ç”¨ Cookie çš„çŠ¶æ€ç®¡ç†Cookie æŠ€æœ¯é€šè¿‡åœ¨è¯·æ±‚å’Œå“åº”æŠ¥æ–‡ä¸­å†™å…¥ Cookie ä¿¡æ¯æ¥æ§åˆ¶å®¢æˆ·ç«¯çš„çŠ¶æ€ã€‚Cookie ä¼šæ ¹æ®ä»æœåŠ¡å™¨ç«¯å‘é€çš„å“åº”æŠ¥æ–‡å†…çš„ä¸€ä¸ªå«åš `Set-Cookie` çš„é¦–éƒ¨å­—æ®µä¿¡æ¯ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜Cookieã€‚å½“ä¸‹æ¬¡å®¢æˆ·ç«¯å†å¾€è¯¥æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­åŠ å…¥ Cookie å€¼åå‘é€å‡ºå»ã€‚æœåŠ¡å™¨ç«¯å‘ç°å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ Cookie åï¼Œä¼šå»æ£€æŸ¥ç©¶ç«Ÿæ˜¯ä»å“ªä¸€ä¸ªå®¢æˆ·ç«¯å‘æ¥çš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå¯¹æ¯”æœåŠ¡å™¨ä¸Šçš„è®°å½•ï¼Œæœ€åå¾—åˆ°ä¹‹å‰çš„çŠ¶æ€ä¿¡æ¯ã€‚

![1529477372443](http://pic.fenghong.tech/1529477372443.png)

```
]# yum install php
]# cd /var/www/html
]# vim setcookie.php
<?php>
setcookie("title",'ceo');
setcookie("name",'wang',time()+86400);
?>
]# systemctl restart httpd
]# curl -v 192.168.1.8/setcookie.php
* About to connect() to 192.168.1.8 port 80 (#0)
*   Trying 192.168.1.8...
* Connected to 192.168.1.8 (192.168.1.8) port 80 (#0)
> GET /setcookie.php HTTP/1.1
> User-Agent: curl/7.29.0
> Host: 192.168.1.8
> Accept: */*
> 
< HTTP/1.1 200 OK
< Date: Thu, 21 Jun 2018 06:40:31 GMT
< Server: Apache
< X-Powered-By: PHP/5.4.16
< Set-Cookie: title=ceo
< Set-Cookie: name=wang; expires=Fri, 22-Jun-2018 06:40:32 GMT
< Content-Length: 0
< Content-Type: text/html; charset=UTF-8
< 
* Connection #0 to host 192.168.1.8 left intact
```


# HTTPS

- httpsï¼š`http over ssl`
- SSLä¼šè¯çš„ç®€åŒ–è¿‡ç¨‹

> 1. å®¢æˆ·ç«¯å‘é€å¯ä¾›é€‰æ‹©çš„åŠ å¯†æ–¹å¼ï¼Œå¹¶å‘æœåŠ¡å™¨è¯·æ±‚è¯ä¹¦
> 2. æœåŠ¡å™¨ç«¯å‘é€è¯ä¹¦ä»¥åŠé€‰å®šçš„åŠ å¯†æ–¹å¼ç»™å®¢æˆ·ç«¯
> 3. å®¢æˆ·ç«¯å–å¾—è¯ä¹¦å¹¶è¿›è¡Œè¯ä¹¦éªŒè¯,å¦‚æœä¿¡ä»»ç»™å…¶å‘è¯ä¹¦çš„CA:
>         éªŒè¯è¯ä¹¦æ¥æºçš„åˆæ³•æ€§ï¼›ç”¨CAçš„å…¬é’¥è§£å¯†è¯ä¹¦ä¸Šæ•°å­—ç­¾å
>         éªŒè¯è¯ä¹¦çš„å†…å®¹çš„åˆæ³•æ€§ï¼šå®Œæ•´æ€§éªŒè¯
>         æ£€æŸ¥è¯ä¹¦çš„æœ‰æ•ˆæœŸé™
>         æ£€æŸ¥è¯ä¹¦æ˜¯å¦è¢«åŠé”€
>         è¯ä¹¦ä¸­æ‹¥æœ‰è€…çš„åå­—ï¼Œä¸è®¿é—®çš„ç›®æ ‡ä¸»æœºè¦ä¸€è‡´
>
> 4. å®¢æˆ·ç«¯ç”Ÿæˆä¸´æ—¶ä¼šè¯å¯†é’¥ï¼ˆå¯¹ç§°å¯†é’¥ï¼‰ï¼Œå¹¶ä½¿ç”¨æœåŠ¡å™¨ç«¯çš„å…¬é’¥åŠ å¯†æ­¤æ•°æ®å‘é€ç»™æœåŠ¡å™¨,å®Œæˆå¯†é’¥äº¤æ¢
> 5. æœåŠ¡ç”¨æ­¤å¯†é’¥åŠ å¯†ç”¨æˆ·è¯·æ±‚çš„èµ„æºï¼Œå“åº”ç»™å®¢æˆ·ç«¯

- æ³¨æ„ï¼šSSLæ˜¯åŸºäºIPåœ°å€å®ç°,å•IPçš„ä¸»æœºä»…å¯ä»¥ä½¿ç”¨ä¸€ä¸ªhttpsè™šæ‹Ÿä¸»æœº

## å®éªŒï¼šæ¨¡æ‹Ÿhttpsçš„å®ç°è¿‡ç¨‹

â€‹	httpsæœåŠ¡å™¨çš„å®ç°è¿‡ç¨‹ï¼Œç”Ÿæˆsslæ–‡ä»¶å¤¹ï¼Œæ”¾ç½®è¯ä¹¦ç›¸å…³æ–‡ä»¶ï¼Œç„¶åå‘é€ç”³è¯·æ–‡ä»¶ï¼Œç­‰å¾…CAå‘é€`httpd.cert`è¯ä¹¦ã€‚

```
]# mkdir /etc/httpd/conf.d/ssl
]# cd /etc/httpd/conf.d/ssl
]# (umask 077;openssl genrsa -out httpd.key 1024)
Generating RSA private key, 1024 bit long modulus
.....................................................++++++
...........................++++++
e is 65537 (0x10001)
]#openssl req -new -key httpd.key  -out httpd.csr
Country Name (2 letter code) [XX]:CN
State or Province Name (full name) []:beijing
Locality Name (eg, city) [Default City]:beijing
Organization Name (eg, company) [Default Company Ltd]:httpd
Organizational Unit Name (eg, section) []:opt
Common Name (eg, your name or your server's hostname) []:www.httpd.com
Email Address []:
Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
ssl]#scp httpd.csr 192.168.1.11:/etc/pki/CA/
The authenticity of host '192.168.1.11 (192.168.1.11)' can't be established.
ECDSA key fingerprint is SHA256:rwE9SvvRx3QSIGMK/vhD6ta3/HdDO4BykxP4Mumjs00.
ECDSA key fingerprint is MD5:31:d3:62:71:12:6a:f6:88:69:a4:95:4e:15:57:48:0a.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '192.168.1.11' (ECDSA) to the list of known hosts.
root@192.168.1.11's password: 
httpd.csr                                     100%  651   435.0KB/s   00:00
```

â€‹	CAé¢å‘è¯ä¹¦è¿‡ç¨‹ï¼Œå…ˆè‡ªç­¾åè¯ä¹¦ï¼Œcsrç”³è¯·çš„ä¿¡æ¯å¿…é¡»ä¸`rootca`å‰é¢çš„ä¿¡æ¯ä¸€è‡´ã€‚

```
]# cd /etc/pki/CA/
]# (umask 077;openssl genrsa -out private/cakey.pem 2048)
Generating RSA private key, 2048 bit long modulus
.+++
.....................................................+++
e is 65537 (0x10001)
]#openssl req -new -x509 -key private/cakey.pem -out cacert.pem -days 3650
Country Name (2 letter code) [XX]:CN
State or Province Name (full name) []:beijing
Locality Name (eg, city) [Default City]:beijing
Organization Name (eg, company) [Default Company Ltd]:httpd
Organizational Unit Name (eg, section) []:opt
Common Name (eg, your name or your server's hostname) []:ca.httpd.com
Email Address []:
```
â€‹	ç„¶å`rootCA`ç­¾ç½²`httpd.csr`,ç”Ÿæˆ`httpd.crt`ï¼Œå†å‘é€åˆ°httpsæœåŠ¡å™¨
```
]# touch index.txt
]# echo 01 > serial
]#openssl ca -in httpd.csr -out certs/http.crt -days 720
Using configuration from /etc/pki/tls/openssl.cnf
Check that the request matches the signature
Signature ok
]#tree
.
â”œâ”€â”€ cacert.pem
â”œâ”€â”€ certs
â”‚Â Â  â””â”€â”€ http.crt
â”œâ”€â”€ crl
â”œâ”€â”€ httpd.csr
â”œâ”€â”€ index.txt
â”œâ”€â”€ index.txt.attr
â”œâ”€â”€ index.txt.old
â”œâ”€â”€ newcerts
â”‚Â Â  â””â”€â”€ 01.pem
â”œâ”€â”€ private
â”‚Â Â  â””â”€â”€ cakey.pem
â”œâ”€â”€ serial
â””â”€â”€ serial.old
]#scp certs/http.crt 192.168.1.8:/etc/httpd/conf.d/ssl/
root@192.168.1.8's password: 
http.crt                                      100% 3699     2.2MB/s   00:00
```

â€‹      `https`æœåŠ¡å™¨æ”¶åˆ°è¯ä¹¦åï¼Œå®‰è£…`install mod_ssl`,ä¿®æ”¹ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼Œå¼€å¯`https`æœåŠ¡
```
]# yum install mod_ssl
]# vim /etc/httpd/conf.d/ssl.conf
SSLCertificateFile /etc/httpd/conf.d/ssl/httpd.crt
SSLCertificateKeyFile /etc/httpd/conf.d/ssl/httpd.key
SSLCACertificateFile /etc/httpd/conf.d/ssl/cacert.pem
]# systemctl restart httpd
```

â€‹	å®éªŒéªŒè¯,åœ¨å›¾å½¢ç•Œé¢ä¸‹è®¿é—®,ç®€å•çš„æ·»åŠ `hosts`æ–‡ä»¶ï¼Œå®ç°å…`dns`è§£æã€‚

```
]# vim /etc/hosts/
192.168.1.8 www.httpd.com
]# firefox https://www.httpd.com
```

â€‹	å¯èƒ½è¿™é‡Œåœ¨æµè§ˆå™¨é‡Œï¼Œå¤§å®¶çœ‹åˆ°çš„æç¤ºä¾æ—§ä¸å®‰å…¨ï¼Œè¿™æ˜¯å› ä¸ºè¯ä¹¦æ²¡æœ‰å¯¼å…¥çš„ä¿¡ä»»çš„ç¼˜æ•…ã€‚å¯¼å…¥è¯ä¹¦å³å¯å˜ç»¿åŠ ğŸ”’

![1529567635757](http://pic.fenghong.tech/1529567635757.png)

## http é‡å®šå‘åˆ° https

â€‹	å°†httpè¯·æ±‚è½¬å‘è‡³`https`çš„URL

â€‹	`Redirect [status] URL-path URL`

```
]# vim /etc/httpd/conf.d/test.conf
redirect Permanent / https://www.httpd.com/
]# systemctl restart httpd
```

åˆ©ç”¨curlå‘½ä»¤éªŒè¯ä¸€ä¸‹,çš„ç¡®è¿›è¡Œäº†è·³è½¬ã€‚

```
]#curl -I http://192.168.1.8/
HTTP/1.1 301 Moved Permanently
Date: Thu, 21 Jun 2018 08:22:49 GMT
Server: Apache
Location: https://www.httpd.com/
Content-Type: text/html; charset=iso-8859-1
```

## HSTS

- HSTS:`HTTP Strict Transport Security`

   æœåŠ¡å™¨ç«¯é…ç½®æ”¯æŒHSTSåï¼Œä¼šåœ¨ç»™æµè§ˆå™¨è¿”å›çš„HTTPé¦–éƒ¨ä¸­æºå¸¦HSTSå­—æ®µã€‚æµè§ˆå™¨è·å–åˆ°è¯¥ä¿¡æ¯åï¼Œä¼šå°†æ‰€æœ‰HTTPè®¿é—®è¯·æ±‚åœ¨å†…éƒ¨åš307è·³è½¬åˆ°HTTPSã€‚è€Œæ— éœ€ä»»ä½•ç½‘ç»œè¿‡ç¨‹

- HSTS preload list

   æ˜¯Chromeæµè§ˆå™¨ä¸­çš„HSTSé¢„è½½å…¥åˆ—è¡¨ï¼Œåœ¨è¯¥åˆ—è¡¨ä¸­çš„ç½‘ç«™ï¼Œä½¿ç”¨Chromeæµè§ˆå™¨è®¿é—®æ—¶ï¼Œä¼šè‡ªåŠ¨è½¬æ¢æˆHTTPSã€‚`Firefoxã€Safariã€Edge`æµè§ˆå™¨ä¹Ÿä¼šé‡‡ç”¨è¿™ä¸ªåˆ—è¡¨

```
]# vim /etc/httpd/conf.d/test.conf
Header always set Strict-Transport-Security "max-age=31536000"
RewriteEngine on
RewriteRule ^(/.*)$ https://%{HTTP_HOST}$1 [redirect=302]
]# systemctl restart httpd
```

â€‹	å®éªŒéªŒè¯ä¸€ä¸‹ï¼Œçš„ç¡®è¿›è¡Œäº†è·³è½¬ã€‚

```
]#curl -I http://192.168.1.8/
HTTP/1.1 302 Found
Date: Thu, 21 Jun 2018 08:19:20 GMT
Server: Apache
Strict-Transport-Security: max-age=31536000
Location: https://192.168.1.8/
Content-Type: text/html; charset=iso-8859-1
```
